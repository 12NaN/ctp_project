(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{124:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(38),o=a.n(s),l=(a(91),a(13)),i=a(14),c=a(16),u=a(15),m=a(17),d=a(82),h=a(29),p=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"No Match"))}}]),t}(r.a.Component),f=a(19),E=a.n(f),g=a(159),b=a(160),v=a(156),N=a(161),C=(a(92),a(12)),w=a.n(C),y=a(30),k=a.n(y),j=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w.a,{className:"profile-card",bg:"light"},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{as:"h3"},this.props.header),r.a.createElement(w.a.Title,null,this.props.firstname," ",this.props.lastname,"'s Profile"),r.a.createElement(w.a.Subtitle,{className:"mb-2 text-muted"}," ",r.a.createElement("a",{href:"mailto:".concat(this.props.email)},"Contact Me")),r.a.createElement(k.a,{variant:"flush"},r.a.createElement(k.a,null,r.a.createElement(w.a.Text,null,r.a.createElement("span",{className:"bio-lead"},"My travel recommendations:")," ",this.props.recommendation)),r.a.createElement(k.a,null,r.a.createElement(w.a.Text,null,r.a.createElement("span",{className:"bio-lead"},"Bio/Message:")," ",this.props.message)),r.a.createElement(k.a,null,r.a.createElement(w.a.Text,null,r.a.createElement("span",{className:"bio-lead"},"Cities/Countries I've been to:")," ",this.props.traveledto)),r.a.createElement(k.a,null,r.a.createElement(w.a.Text,null,r.a.createElement("span",{className:"bio-lead"},"Cities/Countries on my travel wishlist:")," ",this.props.wishlistcities))),r.a.createElement("footer",{className:"blockquote-footer"},"\u201cLive with no excuses and travel with no regrets\u201d ",r.a.createElement("cite",{title:"Source Title"},"~ Oscar Wilde")))))}}]),t}(r.a.Component);function x(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border loading-style",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}var O=E.a.icon({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",iconSize:[25,41],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={latitude:40.76061,longitude:-74.935242,haveUsersLocation:!1,zoom:2,users:[],usersLoaded:!1,draggable:!1,loading:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"findUserLocation",value:function(e){var t=e;this.props.getUserLocation(t)}},{key:"displayUsers",value:function(){var e=this;fetch("/api/users/").then((function(e){return e.json()})).then((function(t){return e.setState({users:t,usersLoaded:!0})}))}},{key:"openPopup",value:function(e){e&&e.leafletElement&&window.setTimeout((function(){e.leafletElement.openPopup()}))}},{key:"componentDidMount",value:function(){var e=this;this.displayUsers(),navigator.geolocation.getCurrentPosition((function(t){t&&fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e.setState({loading:!1,latitude:t.latitude,longitude:t.longitude,haveUsersLocation:!0,zoom:13})})),e.findUserLocation(t)}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.state.usersLoaded,t=[this.state.latitude,this.state.longitude];return this.state.loading?r.a.createElement(x,null):r.a.createElement("div",{className:"map"},r.a.createElement(g.a,{className:"map",ref:function(e){return window.map=e},center:t,zoom:this.state.zoom,scrollWheelZoom:!1},r.a.createElement(b.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.haveUsersLocation?r.a.createElement(v.a,{ref:this.openPopup,position:t,icon:O,draggable:!0},r.a.createElement(N.a,{className:"popup-style"},r.a.createElement(j,{header:"Join and meet fellow travelers.",lastname:"User",message:"Active traveler looking to meet those who enjoy museums and local food spots.",recommendation:"Pack light, and don't forget your toiletries.",traveledto:"Barcelona, Berlin, Rome.",wishlistcities:"I want to see London, Paris, and Tokyo!"}))):null,this.props.userstatus&&e?this.state.users.map((function(e){return r.a.createElement(v.a,{key:e.id,position:[e.latitude,e.longitude],icon:O},r.a.createElement(N.a,{className:"popup-style"},r.a.createElement(j,{firstname:e.firstName,lastname:e.lastName,email:e.email,message:e.message,recommendation:e.recommendation,traveledto:e.traveledTo,wishlistcities:e.wishListCities})))})):""))}}]),t}(r.a.Component),L=a(34),S=a(35),I=a(2),T=a.n(I),A=a(32),D=a.n(A),P=a(31),M=a.n(P),z=a(25),R=a.n(z),B=a(11),F=a.n(B),G=a(36),W=a(76),H=a.n(W),J={isAuthenticated:!1,userId:null,authenticate:function(e,t){var a=this;return fetch("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Login Failed");return J.userId=e,console.log("after response",a.userId),t.json()})).then((function(t){return a.isAuthenticated=!0,a.userId=e,console.log("after body",a.userId),t}))},signout:function(e){var t=this;return fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Logout Failed");return e.json()})).then((function(e){return t.isAuthenticated=!1,e}))}},q=J;function Y(){var e=Object(S.a)(["\n\tfont-size: 1rem;\n"]);return Y=function(){return e},e}var X=G.a.header(Y()),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;q.authenticate(n,r).then((function(e){e&&(a.setState({isAuthenticated:!0,failed:!1}),a.findUserLogInStatus())})).catch((function(e){e&&(console.log("This is err: ",e),a.setState({failed:!0,isAuthenticated:!1}))})),a.findUserLogInStatus()},a.handleSignOut=function(e){q.signout(e).then((function(e){a.setState({isAuthenticated:!1,signUpClicked:!1}),a.findUserLogInStatus()}))},a.handleInputChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.state={isAuthenticated:!1,failed:!1,email:"",password:"",signUpClicked:!1,joinClicked:!1,userJoined:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"findUserLogInStatus",value:function(){this.props.getUserStatus(this.state.isAuthenticated)}},{key:"findUserClickStatus",value:function(e){this.props.getUserClick(e),this.setState({signUpClicked:e})}},{key:"findUserJoin",value:function(){this.setState({userJoined:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!this.state.isAuthenticated&&!this.state.signUpClicked||this.props.userjoin&&!this.state.isAuthenticated?r.a.createElement(w.a,{className:this.state.failed?"login-form-failed":"login-form"},r.a.createElement(w.a.Body,null,r.a.createElement(M.a,null,r.a.createElement(R.a,{className:"login-margin"},r.a.createElement(F.a,{sm:9},r.a.createElement(w.a.Title,{className:"login-text"},"Welcome to Global-Port")),r.a.createElement(F.a,{sm:3},r.a.createElement("img",{className:"navbar-image",alt:"Test",src:H.a,width:"40px",height:"40px",href:"/"})))),r.a.createElement(w.a.Text,null,"Connect with fellow travelers and explore the world!"),r.a.createElement(T.a,{onSubmit:this.handleSubmit},r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,"Email address:"),r.a.createElement(T.a.Control,{onChange:function(t){return e.handleInputChange(t)},size:"sm",type:"email",name:"email",placeholder:"Enter email"}),r.a.createElement(T.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(T.a.Group,{controlId:"formBasicPassword"},r.a.createElement(T.a.Label,null,"Password:"),r.a.createElement(T.a.Control,{onChange:function(t){return e.handleInputChange(t)},size:"sm",type:"password",name:"password",placeholder:"Password"}),r.a.createElement(T.a.Text,{className:"text-muted"})),r.a.createElement(M.a,null,r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(D.a,{type:"submit",variant:"info",onClick:function(t){return e.handleSubmit(t)}},r.a.createElement(X,null,"Log in"))),r.a.createElement(F.a,null,r.a.createElement(D.a,{type:"button",variant:"info",onClick:function(t){return e.findUserClickStatus(t)}},r.a.createElement(X,null,"Sign up"))))),this.state.failed?r.a.createElement(M.a,null,r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement("div",{className:"alert alert-danger alert-button",role:"alert"},"Log in Failed")))):null))):null,this.state.isAuthenticated?r.a.createElement("div",null,r.a.createElement(D.a,{className:"chatroom",variant:"info",type:"submit",onClick:function(){return window.open("http://localhost:3000/chatroom","_blank")}}," Go to chatroom "),r.a.createElement(D.a,{className:"signout",variant:"info",type:"submit",onClick:function(t){return e.handleSignOut(t)}}," Sign out ")):null,r.a.createElement("p",null,q.userId))}}]),t}(r.a.Component),Z={firstName:"",firstNameError:"",lastName:"",lastNameError:"",longitude:null,latitude:null,email:"",emailError:"",password:"",passwordError:"",sucesss:!1,error:!1},Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).validate=function(){var e="",t="",n="";return a.state.firstName||(e="First name cannot be blank"),a.state.lastName||(t="Last name cannot be blank"),a.state.email.includes("@")||(n="Invalid Email"),!(n||e||t)||(a.setState({emailError:n,firstNameError:e,lastNameError:t}),!1)},a.handleSubmit=function(e){if(e.preventDefault(),a.validate()){var t=a.state;fetch("/api/auth/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:t.firstName,lastName:t.lastName,latitude:parseFloat(a.props.userlat),longitude:parseFloat(a.props.userlong),email:t.email,password:t.password,message:t.message,recommendation:t.recommendation,traveledTo:t.traveledTo,wishListCities:t.wishListCities})}).then((function(e){if(e.ok)return e.json();throw new Error("Content validation")})).then((function(e){a.setState({success:!0}),a.findUserJoinStatus(e)})).catch((function(e){a.setState({error:!0}),console.log(e)})),console.log("Log in data is: ",t),a.setState(Z)}},a.handleInputChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.state={firstName:"",firstNameError:"",lastName:"",lastNameError:"",longitude:null,latitude:null,email:"",emailError:"",password:"",passwordError:"",message:"",messageError:"",recommendation:"",traveledTo:"",wishListCities:"",sucesss:!1,error:!1,joinClicked:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"findUserJoinStatus",value:function(e){this.props.getUserJoin(e),this.setState({joinClicked:!0})}},{key:"render",value:function(){var e=this,t=this.props.userlat,a=this.props.userlong;return r.a.createElement("div",{className:"signup-form"},r.a.createElement(w.a,{bg:"dark",text:"white"},r.a.createElement(w.a.Body,null,r.a.createElement(M.a,null,r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(w.a.Title,null,"Join our vibrant community of travelers")))),r.a.createElement(M.a,null,r.a.createElement(T.a,{onSubmit:function(t){return e.handleSubmit(t)},className:"formCentered"},r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupFirstName"},r.a.createElement(T.a.Label,null,"Enter your first name:"),r.a.createElement(T.a.Control,{type:"text",placeholder:"First name",name:"firstName",value:this.state.firstName,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement(T.a.Text,{className:"error-text"},this.state.firstNameError)),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupLastName"},r.a.createElement(T.a.Label,null,"Enter your last name:"),r.a.createElement(T.a.Control,{type:"text",placeholder:"Last name",name:"lastName",value:this.state.lastName,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement(T.a.Text,{className:"error-text"},this.state.lastNameError))),r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupEmail"},r.a.createElement(T.a.Label,null,"Enter your email:"),r.a.createElement(T.a.Control,{type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement(T.a.Text,{className:"error-text"},this.state.emailError)),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupPassword"},r.a.createElement(T.a.Label,null,"Enter your password:"),r.a.createElement(T.a.Control,{type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement(T.a.Text,{className:"error-text"},this.state.passwordError)),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,"Your Latitude:"),r.a.createElement(T.a.Control,{type:"text",readOnly:!0,defaultValue:t}))),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,"Your Longitude:"),r.a.createElement(T.a.Control,{type:"text",readOnly:!0,defaultValue:a})))),r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupMessage"},r.a.createElement(T.a.Label,null,"Enter a short message:"),r.a.createElement(T.a.Control,{type:"text",placeholder:"Message",name:"message",value:this.state.message,onChange:function(t){return e.handleInputChange(t)}})),r.a.createElement(T.a.Text,{className:"error-text"},this.state.messageError)),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formGroupRecommendation"},r.a.createElement(T.a.Label,null,"Any travel tips?"),r.a.createElement(T.a.Control,{type:"text",placeholder:"Recommendation",name:"recommendation",value:this.state.recommendation,onChange:function(t){return e.handleInputChange(t)}}))),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formTraveledTo"},r.a.createElement(T.a.Label,null,"Cities you have been to?"),r.a.createElement(T.a.Control,{type:"text",placeholder:"Traveled To",name:"traveledTo",value:this.state.traveledTo,onChange:function(t){return e.handleInputChange(t)}}))),r.a.createElement(F.a,null,r.a.createElement(T.a.Group,{controlId:"formWishListCities"},r.a.createElement(T.a.Label,null,"Cities you want to visit?"),r.a.createElement(T.a.Control,{type:"text",placeholder:"Wish List Cities",name:"wishListCities",value:this.state.wishListCities,onChange:function(t){return e.handleInputChange(t)}})))),r.a.createElement(R.a,null,r.a.createElement(F.a,null,r.a.createElement(D.a,{variant:"info",type:"submit",onClick:function(t){return e.handleSubmit(t)}},"Join"))))))))}}]),t}(r.a.Component);function V(){var e=Object(S.a)(["\n\t.footer {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: white;\n\t\tposition: absolute;\n\t\tbackground-color: rgba(0,0,0,.5);\n\t\theight: 70px;\n\t\twidth: 100%;\n\t\tbottom: 0;\n\t\tz-index: 401;\n\t\tword-spacing: 5px;\n\t\tfont-size: 18px;\n\t}\n\n\t.footer a {\n\t\tfont-size: 24px;\n\t\ttext-decoration: none;\n\t\topacity: 1.0;\n\t\tcolor: #5bc0de;\n\t\tfont-weight: 300;\n\t}\n\n\t.footer a:hover {\n\t\tfont-size: 30px;\n\t\ttext-decoration: none;\n\t\topacity: 1.0;\n\t\tcolor: black;\n\t}\n\n"]);return V=function(){return e},e}var _=G.a.div(V());var $=function(){return r.a.createElement(_,null,r.a.createElement("div",{className:"footer "},r.a.createElement("span",null," Created by ",r.a.createElement("a",{href:"https://github.com/elunaj"}," Elias Luna ")),r.a.createElement("span",null,"\xa0and ",r.a.createElement("a",{href:"https://github.com/asgharm1999"}," Muhammad Asghar\xa0")),r.a.createElement("span",null," @ ",r.a.createElement("a",{href:"https://cunytechprep.nyc"}," CUNY Tech Prep "))))},ee=a(158),te=a(79),ae=a.n(te);function ne(){var e=Object(S.a)(["\n\t.navbar {\n\t\tbackground-color:transparent !important;\n\t\tposition: absolute;\n\t\theight: 80px;\n\t\twidth: 10%;\n\t\tleft: 55px;\n\t\tz-index: 20000;\n\t}\n\n\t.navbar-text {\n\t\theight: 70px;\n\t\ttransition: box-shadow .3s;\n\t\tborder-radius: 10px;\n\t\tfont-weight: 600;\n\t\n\t}\n\n\t.navbar-text-title {\n\t\tfont-size: 50px;\n\t\ttext-decoration: none;\n \n\t}\n\n\t.navbar-text:hover {\n\t\tbox-shadow: 10px 5px 5px rgba(33,33,33,.7); \n\t}\n\n\t.navbar-image {\n\t\tcursor: pointer;\n\t\ttransition: box-shadow .3s;\n\t\tborder-radius: 10px;\n\t\tmargin-bottom: 10px;\n\t\tmargin-left: 10px;\n\t}\n\n\t.navbar-image:hover {\n\t\tbox-shadow: 10px 5px 5px rgba(33,33,33,.7); \n\t}\n"]);return ne=function(){return e},e}var re=G.a.div(ne()),se=function(){return r.a.createElement(re,null,r.a.createElement(ee.a,{className:"navbar .z-depth-2 justify-content-start"},r.a.createElement(ee.a.Brand,null,r.a.createElement("img",{className:"navbar-image",alt:"Test",src:ae.a,width:"100px",height:"65px",href:"/"})," ")))},oe=(a(66),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isUserLoggedIn:!1,userLat:null,userLong:null,userName:"",signupClicked:!1,joinClicked:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getUserStatus",value:function(e){this.setState({isUserLoggedIn:e})}},{key:"getUserClick",value:function(e){this.setState({signupClicked:e})}},{key:"getUserName",value:function(e){this.setState({userName:e})}},{key:"getUserLocation",value:function(e){this.setState({userLat:e.coords.latitude,userLong:e.coords.longitude})}},{key:"getUserJoin",value:function(e){this.setState({joinClicked:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null),r.a.createElement(U,{userstatus:this.state.isUserLoggedIn,getUserLocation:function(t){return e.getUserLocation(t)}}),r.a.createElement(K,{userjoin:this.state.joinClicked,getUserStatus:function(t){return e.getUserStatus(t)},getUserClick:function(t){return e.getUserClick(t)}}),this.state.signupClicked&&!this.state.joinClicked?r.a.createElement(Q,{userlat:this.state.userLat+.11*Math.random(),userlong:this.state.userLong+.11*Math.random(),getUserJoin:function(t){return e.getUserJoin(t)}}):null,r.a.createElement($,null))}}]),t}(r.a.Component)),le=a(28),ie=(a(124),a(125),a(126),a(57)),ce=a(55),ue=a.n(ce),me=a(81),de=a.n(me);function he(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(L.a)({},n,a))}function pe(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5ceb004b-37bb-4c5f-8428-736df7233003",a=this.state.currentUser;return this.setState({messages:[]}),a.subscribeToRoom({roomId:"".concat(t),messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(ie.a)(e.state.messages),[t])})},onPresenceChanged:function(){var t=e.state.currentRoom;e.setState({roomUsers:t.users.sort((function(e){return"online"===e.presence.state?-1:1}))})}}}).then((function(t){var n=t.customData&&t.customData.isDirectMessage?t.customData.userIds.filter((function(e){return e!==a.id}))[0]:t.name;e.setState({currentRoom:t,roomUsers:t.users,rooms:a.rooms,roomName:n})})).catch(console.error)}function fe(e){var t=this;e.preventDefault();var a=this.state.userId;null!==a&&""!==a.trim()?de.a.post("http://localhost:5200/users",{userId:a}).then((function(){var e=new ue.a.TokenProvider({url:"http://localhost:5200/authenticate"});return new ue.a.ChatManager({instanceLocator:"v1:us1:9db2c116-efd4-4485-b761-66bb1d1d157e",userId:a,tokenProvider:e}).connect({onAddedToRoom:function(e){var a=t.state.rooms;t.setState({rooms:[].concat(Object(ie.a)(a),[e])})}}).then((function(e){t.setState({currentUser:e,showLogin:!1,rooms:e.rooms},(function(){return pe.call(t)}))}))})).catch(console.error):alert("Invalid userId")}function Ee(e){e.preventDefault();var t=this.state,a=t.newMessage,n=t.currentUser,r=t.currentRoom;""!==a.trim()&&(n.sendMessage({text:a,roomId:"".concat(r.id)}),this.setState({newMessage:""}))}function ge(e){var t=this.state,a=t.currentUser,n=t.rooms,r="".concat(a.id,"_").concat(e),s=n.filter((function(t){if(t.customData&&t.customData.isDirectMessage){var n=[a.id,e],r=t.customData.userIds;if(n.sort().join("")===r.sort().join(""))return{room:t}}return!1}));return s.length>0?Promise.resolve(s[0]):a.createRoom({name:"".concat(r),private:!0,addUserIds:["".concat(e)],customData:{isDirectMessage:!0,userIds:[a.id,e]}})}function be(e){var t=this;ge.call(this,e).then((function(e){pe.call(t,e.id)}))}var ve=function(e){var t=e.userId,a=e.handleInput,n=e.connectToChatkit,s=e.email;return console.log("dialog: ",s),r.a.createElement("div",{className:"dialog-container"},r.a.createElement("div",{className:"dialog"},r.a.createElement("form",{className:"dialog-form",onSubmit:n},r.a.createElement("label",{className:"username-label",htmlFor:"username"},"Choose a chatroom nickname"),r.a.createElement("input",{id:"username",className:"username-input",autoFocus:!0,type:"text",name:"userId",value:t,default:s,onChange:a,placeholder:"Please type nickname here"}),r.a.createElement("button",{type:"submit",className:"submit-btn"},"Submit"))))},Ne=function(e){var t=e.rooms,a=e.currentRoom,n=e.connectToRoom,s=e.currentUser,o=t.map((function(e){var t=e.isPrivate?"\ud83d\udd12":"\ud83c\udf10",o=e.id===a.id?"active":"";return r.a.createElement("li",{className:o,key:e.id,onClick:function(){return n(e.id)}},r.a.createElement("span",{className:"room-icon"},t),e.customData&&e.customData.isDirectMessage?r.a.createElement("span",{className:"room-name"},e.customData.userIds.filter((function(e){return e!==s.id}))[0]):r.a.createElement("span",{className:"room-name"},e.name))}));return r.a.createElement("div",{className:"rooms"},r.a.createElement("ul",{className:"chat-rooms"},o))},Ce=a(157),we=function(e){return e.messages.map((function(e){var t=Object(Ce.a)(new Date("".concat(e.updatedAt)),"HH:mm");return r.a.createElement("li",{className:"message",key:e.id},r.a.createElement("div",null,r.a.createElement("span",{className:"user-id"},e.senderId),r.a.createElement("span",null,e.text)),r.a.createElement("span",{className:"message-time"},t))}))},ye=function(e){var t=e.roomUsers,a=e.sendDM,n=e.currentUser,s=t.map((function(e){return r.a.createElement("li",{className:"room-member",key:e.id},r.a.createElement("div",null,r.a.createElement("span",{className:"presence ".concat(e.presence.state)}),r.a.createElement("span",null,e.name)),n.id!==e.id?r.a.createElement("button",{onClick:function(){return a(e.id)},title:"Send ".concat(e.name," a direct message"),className:"send-dm"},"+"):null)}));return r.a.createElement("div",{className:"room-users"},r.a.createElement("ul",null,s))},ke=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={userId:"",showLogin:!0,isLoading:!1,currentUser:null,currentRoom:null,rooms:[],roomUsers:[],roomName:null,messages:[],newMessage:""},e.handleInput=he.bind(Object(le.a)(e)),e.connectToChatkit=fe.bind(Object(le.a)(e)),e.connectToChatkit=fe.bind(Object(le.a)(e)),e.connectToRoom=pe.bind(Object(le.a)(e)),e.sendMessage=Ee.bind(Object(le.a)(e)),e.sendDM=be.bind(Object(le.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.userId,a=e.showLogin,n=e.rooms,s=e.currentRoom,o=e.currentUser,l=e.messages,i=e.newMessage,c=e.roomUsers,u=e.roomName;return console.log("in chat",q),r.a.createElement("div",{className:"Chat-Style Chat"},r.a.createElement("aside",{className:"sidebar left-sidebar"},o?r.a.createElement("div",{className:"user-profile"},r.a.createElement("span",{className:"username"},o.name),r.a.createElement("span",{className:"user-id"},"@".concat(o.id))):null,s?r.a.createElement(Ne,{rooms:n,currentRoom:s,connectToRoom:this.connectToRoom,currentUser:o}):null),r.a.createElement("section",{className:"chat-screen"},r.a.createElement("header",{className:"chat-header"},s?r.a.createElement("h3",null,u):null),r.a.createElement("ul",{className:"chat-messages"},r.a.createElement(we,{messages:l})),r.a.createElement("footer",{className:"chat-footer"},r.a.createElement("form",{onSubmit:this.sendMessage,className:"message-form"},r.a.createElement("input",{type:"text",value:i,name:"newMessage",className:"message-input",placeholder:"Type your message and hit ENTER to send",onChange:this.handleInput})))),r.a.createElement("aside",{className:"sidebar right-sidebar"},a?r.a.createElement(ve,{userId:t,email:q.userId,handleInput:this.handleInput,connectToChatkit:this.connectToChatkit}):null,s?r.a.createElement(ye,{currentUser:o,sendDM:this.sendDM,roomUsers:c}):null))}}]),t}(n.Component),je=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null),r.a.createElement(ke,null))}}]),t}(r.a.Component),xe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:oe}),r.a.createElement(h.a,{exact:!0,path:"/chatroom",component:je}),r.a.createElement(h.a,{component:p}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,a){},76:function(e,t,a){e.exports=a.p+"static/media/earth-globe.c3c5ba1c.svg"},79:function(e,t,a){e.exports=a.p+"static/media/map.8fcf524a.svg"},86:function(e,t,a){e.exports=a(152)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.da07ed02.chunk.js.map