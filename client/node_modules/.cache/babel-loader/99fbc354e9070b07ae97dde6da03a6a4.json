{"ast":null,"code":"var _jsxFileName = \"/Users/Luna23/Documents/CUNY Tech Prep/master-project/ctp_project/client/src/components/MapComponent.js\";\nimport React from 'react';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport styled from 'styled-components';\nimport Profile from './Profile.js';\nimport auth from '../services/auth';\nimport Alert from 'react-bootstrap/Alert'; //creates icon used for marker/pin image\n\nconst myIcon = L.icon({\n  iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=',\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [0, -41]\n});\nexport default class MapComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      latitude: 40.760610,\n      longitude: -74.935242,\n      haveUsersLocation: false,\n      zoom: 2,\n      users: [],\n      usersLoaded: false,\n      draggable: false\n    };\n  }\n\n  findUserLocation(position) {\n    const location = position;\n    this.props.getUserLocation(location);\n  } //grabs list of users\n\n\n  displayUsers() {\n    fetch('/api/users/').then(res => res.json()).then(users => this.setState({\n      users: users,\n      usersLoaded: true\n    }\n    /*, () => console.log('Users fetched...', users)*/\n    ));\n  }\n\n  openPopup(marker) {\n    if (marker && marker.leafletElement) {\n      window.setTimeout(() => {\n        marker.leafletElement.openPopup();\n      });\n    }\n  } //Asks for users location when map renders, then places a pin based on the position\n  //coordinates\n\n\n  componentDidMount() {\n    //makes api call to grab users\n    this.displayUsers(); //browser method grabs user location coordinates with permission\n\n    navigator.geolocation.getCurrentPosition(position => {\n      //if user hits accept, we receive a position object, if so,\n      //we make an api call to receive user location (provides more accurate pin)\n      if (position) {\n        fetch('https://ipapi.co/json').then(res => res.json()).then(location => {\n          this.setState({\n            latitude: position.coords.latitude + Math.random() * .3,\n            longitude: position.coords.longitude + Math.random() * .3,\n            haveUsersLocation: true,\n            zoom: 13\n          });\n        });\n      }\n\n      this.findUserLocation(this.state);\n    }, () => {\n      console.log(\"error\");\n    });\n  }\n\n  render() {\n    //finds whether displayUsers() has grabbed users\n    const haveUsersList = this.state.usersLoaded;\n    const test = this.props.userstatus;\n    const isUserLoggedIn = this.state.isUserLoggedIn; //grabs current users position, and passes lat, long info into marker\n\n    const position = [this.state.latitude, this.state.longitude];\n    return React.createElement(\"div\", {\n      className: \"map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Map, {\n      className: \"map\",\n      center: position,\n      zoom: this.state.zoom,\n      scrollWheelZoom: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), this.state.haveUsersLocation ? React.createElement(Marker, {\n      ref: this.openPopup,\n      position: position,\n      icon: myIcon,\n      draggable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      className: \"popup-style\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Profile, {\n      header: \"Join and meet fellow travelers.\",\n      lastname: \"User\",\n      message: \"Active traveler looking to meet those who enjoy museums and local food spots.\",\n      recommendation: \"Pack light, and don't forget your toiletries.\",\n      traveledto: \"Barcelona, Berlin, Rome.\",\n      wishlistcities: \"I want to see London, Paris, and Tokyo!\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }))) : null, this.props.userstatus && haveUsersList ? this.state.users.map(user => React.createElement(Marker, {\n      key: user.id,\n      position: [user.latitude, user.longitude],\n      icon: myIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      className: \"popup-style\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Profile, {\n      firstname: user.firstName,\n      lastname: user.lastName,\n      email: user.email,\n      message: user.message,\n      recommendation: user.recommendation,\n      traveledto: user.traveledTo,\n      wishlistcities: user.wishListCities,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })))) : ''));\n  }\n\n}","map":{"version":3,"sources":["/Users/Luna23/Documents/CUNY Tech Prep/master-project/ctp_project/client/src/components/MapComponent.js"],"names":["React","L","Map","TileLayer","Marker","Popup","styled","Profile","auth","Alert","myIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","MapComponent","Component","constructor","props","state","latitude","longitude","haveUsersLocation","zoom","users","usersLoaded","draggable","findUserLocation","position","location","getUserLocation","displayUsers","fetch","then","res","json","setState","openPopup","marker","leafletElement","window","setTimeout","componentDidMount","navigator","geolocation","getCurrentPosition","coords","Math","random","console","log","render","haveUsersList","test","userstatus","isUserLoggedIn","map","user","id","firstName","lastName","email","message","recommendation","traveledTo","wishListCities"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,SAAd;AACA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,MAAzB,EAAiCC,KAAjC,QAA8C,eAA9C;AACA,OAAO,0BAAP;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,KAAP,MAAkB,uBAAlB,C,CAGA;;AACA,MAAMC,MAAM,GAAGT,CAAC,CAACU,IAAF,CAAO;AACpBC,EAAAA,OAAO,EAAE,47DADW;AAEpBC,EAAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CAFU;AAGpBC,EAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,EAAP,CAHQ;AAIpBC,EAAAA,WAAW,EAAE,CAAC,CAAD,EAAI,CAAC,EAAL;AAJO,CAAP,CAAf;AAQA,eAAe,MAAMC,YAAN,SAA2BhB,KAAK,CAACiB,SAAjC,CAA2C;AAExDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,SADC;AAEXC,MAAAA,SAAS,EAAE,CAAC,SAFD;AAGXC,MAAAA,iBAAiB,EAAE,KAHR;AAIXC,MAAAA,IAAI,EAAE,CAJK;AAKXC,MAAAA,KAAK,EAAE,EALI;AAMXC,MAAAA,WAAW,EAAE,KANF;AAOXC,MAAAA,SAAS,EAAE;AAPA,KAAb;AASD;;AAECC,EAAAA,gBAAgB,CAACC,QAAD,EAAW;AACzB,UAAMC,QAAQ,GAAGD,QAAjB;AACA,SAAKV,KAAL,CAAWY,eAAX,CAA2BD,QAA3B;AACD,GAlBqD,CAqBtD;;;AACAE,EAAAA,YAAY,GAAG;AAEbC,IAAAA,KAAK,CAAC,aAAD,CAAL,CACGC,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQT,KAAK,IACX,KAAKY,QAAL,CAAc;AACZZ,MAAAA,KAAK,EAAEA,KADK;AAEZC,MAAAA,WAAW,EAAE;AAFD;AAGb;AAHD,KAHF;AAOA;;AAEDY,EAAAA,SAAS,CAAEC,MAAF,EAAU;AACpB,QAAIA,MAAM,IAAIA,MAAM,CAACC,cAArB,EAAqC;AACnCC,MAAAA,MAAM,CAACC,UAAP,CAAkB,MAAM;AACtBH,QAAAA,MAAM,CAACC,cAAP,CAAsBF,SAAtB;AACD,OAFD;AAGD;AACF,GAvCuD,CAyCtD;AACA;;;AACAK,EAAAA,iBAAiB,GAAG;AAGhB;AAEA,SAAKX,YAAL,GALgB,CAQlB;;AACAY,IAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAA0CjB,QAAD,IAAc;AAEvD;AACA;AACA,UAAIA,QAAJ,EAAc;AAEZI,QAAAA,KAAK,CAAC,uBAAD,CAAL,CACGC,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQJ,QAAQ,IAAI;AAEhB,eAAKO,QAAL,CAAc;AACVhB,YAAAA,QAAQ,EAAEQ,QAAQ,CAACkB,MAAT,CAAgB1B,QAAhB,GAA4B2B,IAAI,CAACC,MAAL,KAAgB,EAD5C;AAEV3B,YAAAA,SAAS,EAAEO,QAAQ,CAACkB,MAAT,CAAgBzB,SAAhB,GAA6B0B,IAAI,CAACC,MAAL,KAAgB,EAF9C;AAGV1B,YAAAA,iBAAiB,EAAE,IAHT;AAIVC,YAAAA,IAAI,EAAE;AAJI,WAAd;AAMD,SAVH;AAWE;;AACD,WAAKI,gBAAL,CAAsB,KAAKR,KAA3B;AAEF,KApBD,EAsBA,MAAM;AACJ8B,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AAED,KAzBD;AA0BD;;AAGHC,EAAAA,MAAM,GAAG;AACP;AACA,UAAMC,aAAa,GAAG,KAAKjC,KAAL,CAAWM,WAAjC;AAEA,UAAM4B,IAAI,GAAG,KAAKnC,KAAL,CAAWoC,UAAxB;AAGA,UAAMC,cAAc,GAAG,KAAKpC,KAAL,CAAWoC,cAAlC,CAPO,CAQP;;AACA,UAAM3B,QAAQ,GAAG,CAAC,KAAKT,KAAL,CAAWC,QAAZ,EAAsB,KAAKD,KAAL,CAAWE,SAAjC,CAAjB;AAEA,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,KAAf;AACA,MAAA,MAAM,EAAEO,QADR;AAEA,MAAA,IAAI,EAAE,KAAKT,KAAL,CAAWI,IAFjB;AAGA,MAAA,eAAe,EAAE,KAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,SAAD;AACE,MAAA,WAAW,EAAC,2EADd;AAEE,MAAA,GAAG,EAAC,oDAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAYC,KAAKJ,KAAL,CAAWG,iBAAX,GAEE,oBAAC,MAAD;AAAQ,MAAA,GAAG,EAAE,KAAKe,SAAlB;AACA,MAAA,QAAQ,EAAET,QADV;AAEA,MAAA,IAAI,EAAEnB,MAFN;AAGA,MAAA,SAAS,EAAE,IAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIC,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,OAAD;AACE,MAAA,MAAM,EAAC,iCADT;AAEE,MAAA,QAAQ,EAAC,MAFX;AAGE,MAAA,OAAO,EAAC,+EAHV;AAIE,MAAA,cAAc,EAAC,+CAJjB;AAKE,MAAA,UAAU,EAAC,0BALb;AAME,MAAA,cAAc,EAAC,yCANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAJD,CAFF,GAea,IA3Bd,EAkCC,KAAKS,KAAL,CAAWoC,UAAX,IAAyBF,aAAzB,GAAyC,KAAKjC,KAAL,CAAWK,KAAX,CAAiBgC,GAAjB,CAAsBC,IAAI,IAClE,oBAAC,MAAD;AAAQ,MAAA,GAAG,EAAEA,IAAI,CAACC,EAAlB;AACA,MAAA,QAAQ,EAAE,CAACD,IAAI,CAACrC,QAAN,EAAgBqC,IAAI,CAACpC,SAArB,CADV;AAEA,MAAA,IAAI,EAAEZ,MAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,OAAD;AACA,MAAA,SAAS,EAAEgD,IAAI,CAACE,SADhB;AAEA,MAAA,QAAQ,EAAEF,IAAI,CAACG,QAFf;AAGA,MAAA,KAAK,EAAEH,IAAI,CAACI,KAHZ;AAIA,MAAA,OAAO,EAAEJ,IAAI,CAACK,OAJd;AAKA,MAAA,cAAc,EAAEL,IAAI,CAACM,cALrB;AAMA,MAAA,UAAU,EAAEN,IAAI,CAACO,UANjB;AAOA,MAAA,cAAc,EAAEP,IAAI,CAACQ,cAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAHF,CADwC,CAAzC,GAgBI,EAlDL,CAFF,CADF;AA2DF;;AAvJwD","sourcesContent":["import React from 'react';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport styled from 'styled-components';\nimport Profile from './Profile.js';\nimport auth from '../services/auth';\nimport Alert from 'react-bootstrap/Alert';\n\n\n//creates icon used for marker/pin image\nconst myIcon = L.icon({\n  iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=',\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [0, -41],\n});\n\n\nexport default class MapComponent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      latitude: 40.760610,\n      longitude: -74.935242,\n      haveUsersLocation: false,\n      zoom: 2,\n      users: [],\n      usersLoaded: false,\n      draggable: false,\n    }\n  }\n\n    findUserLocation(position) {\n      const location = position;\n      this.props.getUserLocation(location);\n    }\n\n\n    //grabs list of users\n    displayUsers() {\n\n      fetch('/api/users/')\n        .then(res => res.json())\n        .then(users => \n        this.setState({\n          users: users,\n          usersLoaded: true\n        }/*, () => console.log('Users fetched...', users)*/));\n     }\n\n     openPopup (marker) {\n    if (marker && marker.leafletElement) {\n      window.setTimeout(() => {\n        marker.leafletElement.openPopup()\n      })\n    }\n  }\n\n    //Asks for users location when map renders, then places a pin based on the position\n    //coordinates\n    componentDidMount() {\n\n\n        //makes api call to grab users\n\n        this.displayUsers();\n \n    \n      //browser method grabs user location coordinates with permission\n      navigator.geolocation.getCurrentPosition((position) => {\n  \n      //if user hits accept, we receive a position object, if so,\n      //we make an api call to receive user location (provides more accurate pin)\n      if (position) {\n\n        fetch('https://ipapi.co/json')\n          .then(res => res.json())\n          .then(location => {\n\n            this.setState({\n                latitude: position.coords.latitude + (Math.random() * .3),\n                longitude: position.coords.longitude + (Math.random() * .3),\n                haveUsersLocation: true,\n                zoom: 13,\n            });\n          });\n         }\n         this.findUserLocation(this.state);\n\n      }, \n\n      () => {\n        console.log(\"error\");\n  \n      });\n    }\n\n\n  render() {\n    //finds whether displayUsers() has grabbed users\n    const haveUsersList = this.state.usersLoaded;\n\n    const test = this.props.userstatus;\n\n\n    const isUserLoggedIn = this.state.isUserLoggedIn;\n    //grabs current users position, and passes lat, long info into marker\n    const position = [this.state.latitude, this.state.longitude];\n\n    return (\n      <div className=\"map\">\n\n        <Map className=\"map\" \n        center={position} \n        zoom={this.state.zoom} \n        scrollWheelZoom={false}>\n          <TileLayer\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n\n\n        {/* ternary operator ? If we have users location we render a marker and it on the map : If not\n        they'll see our default map position/state */}\n        {this.state.haveUsersLocation ? \n  \n           <Marker ref={this.openPopup}\n           position={position} \n           icon={myIcon}\n           draggable={true}>\n            <Popup className=\"popup-style\">\n            <Profile\n              header=\"Join and meet fellow travelers.\"\n              lastname=\"User\"\n              message=\"Active traveler looking to meet those who enjoy museums and local food spots.\"\n              recommendation=\"Pack light, and don't forget your toiletries.\"\n              traveledto=\"Barcelona, Berlin, Rome.\"\n              wishlistcities=\"I want to see London, Paris, and Tokyo!\"/> \n            </Popup>\n          </Marker> : null\n        }\n      \n        {/*this grabs all users and their locations (lats and long) if haveUsersList = true in state*/}\n        \n        {/*if userstatus (passed down from App.js is true, meaning they've logged in\n      and are an authenticate user) is true, we render all users*/}\n        {this.props.userstatus && haveUsersList ? this.state.users.map( user => (\n          <Marker key={user.id}\n          position={[user.latitude, user.longitude]} \n          icon={myIcon}>\n            <Popup className=\"popup-style\">\n            <Profile \n            firstname={user.firstName} \n            lastname={user.lastName}\n            email={user.email}\n            message={user.message}\n            recommendation={user.recommendation}\n            traveledto={user.traveledTo}\n            wishlistcities={user.wishListCities}/>\n              \n            </Popup>\n          </Marker> \n        )) : ''\n      }\n\n        </Map>\n      </div>\n    );\n }\n}"]},"metadata":{},"sourceType":"module"}